{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict-local\n * @format\n */\n\n/* eslint-env browser */\n\n/* eslint-disable no-console */\n\"use strict\";\n\nconst injectUpdate = require(\"./injectUpdate\");\n\nfunction registerServiceWorker(swUrl) {\n  const serviceWorker = navigator.serviceWorker;\n\n  if (!serviceWorker) {\n    if (__DEV__) {\n      console.info(\"ServiceWorker not supported\");\n    }\n\n    return;\n  }\n\n  window.addEventListener(\"load\", function () {\n    const registrationPromise = serviceWorker.register(swUrl);\n\n    if (__DEV__) {\n      registrationPromise.then(registration => {\n        console.info(\"ServiceWorker registration successful with scope: \", registration.scope);\n      }, error => {\n        console.error(\"ServiceWorker registration failed: \", error);\n      });\n      serviceWorker.addEventListener(\"message\", event => {\n        const data = event.data;\n        /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment suppresses an\n         * error found when Flow v0.97 was deployed. To see the error delete\n         * this comment and run Flow. */\n\n        if (!(data instanceof Object) || typeof data.type !== \"string\") {\n          return;\n        }\n\n        switch (data.type) {\n          case \"METRO_UPDATE_START\":\n            {\n              console.info(\"Metro update started.\");\n              break;\n            }\n\n          case \"METRO_UPDATE\":\n            {\n              /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n               * suppresses an error found when Flow v0.97 was deployed. To see\n               * the error delete this comment and run Flow. */\n              console.info(\"Injecting metro update:\", data.body);\n              /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n               * suppresses an error found when Flow v0.97 was deployed. To see\n               * the error delete this comment and run Flow. */\n\n              injectUpdate(data.body);\n              break;\n            }\n\n          case \"METRO_UPDATE_ERROR\":\n            {\n              /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n               * suppresses an error found when Flow v0.97 was deployed. To see\n               * the error delete this comment and run Flow. */\n              console.error(\"Metro update error: \", data.error);\n              break;\n            }\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = registerServiceWorker;","map":{"version":3,"sources":["/home/lp-greenapex/gargi/okydpim-36944-react-native/src/packages/components/src/registerServiceWorker.js"],"names":["injectUpdate","require","registerServiceWorker","swUrl","serviceWorker","navigator","__DEV__","console","info","window","addEventListener","registrationPromise","register","then","registration","scope","error","event","data","Object","type","body","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAAC,gBAAD,CAA5B;;AAEA,SAASC,qBAAT,CAA+BC,KAA/B,EAAsC;AACpC,QAAMC,aAAa,GAAGC,SAAS,CAACD,aAAhC;;AAEA,MAAI,CAACA,aAAL,EAAoB;AAClB,QAAIE,OAAJ,EAAa;AACXC,MAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb;AACD;;AAED;AACD;;AAEDC,EAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,YAAW;AACzC,UAAMC,mBAAmB,GAAGP,aAAa,CAACQ,QAAd,CAAuBT,KAAvB,CAA5B;;AAEA,QAAIG,OAAJ,EAAa;AACXK,MAAAA,mBAAmB,CAACE,IAApB,CACEC,YAAY,IAAI;AACdP,QAAAA,OAAO,CAACC,IAAR,CACE,oDADF,EAEEM,YAAY,CAACC,KAFf;AAID,OANH,EAOEC,KAAK,IAAI;AACPT,QAAAA,OAAO,CAACS,KAAR,CAAc,qCAAd,EAAqDA,KAArD;AACD,OATH;AAWAZ,MAAAA,aAAa,CAACM,gBAAd,CAA+B,SAA/B,EAA0CO,KAAK,IAAI;AACjD,cAAMC,IAAI,GAAGD,KAAK,CAACC,IAAnB;AACA;AACR;AACA;;AAEQ,YAAI,EAAEA,IAAI,YAAYC,MAAlB,KAA6B,OAAOD,IAAI,CAACE,IAAZ,KAAqB,QAAtD,EAAgE;AAC9D;AACD;;AAED,gBAAQF,IAAI,CAACE,IAAb;AACE,eAAK,oBAAL;AAA2B;AACzBb,cAAAA,OAAO,CAACC,IAAR,CAAa,uBAAb;AACA;AACD;;AAED,eAAK,cAAL;AAAqB;AACnB;AACZ;AACA;AACYD,cAAAA,OAAO,CAACC,IAAR,CAAa,yBAAb,EAAwCU,IAAI,CAACG,IAA7C;AACA;AACZ;AACA;;AAEYrB,cAAAA,YAAY,CAACkB,IAAI,CAACG,IAAN,CAAZ;AACA;AACD;;AAED,eAAK,oBAAL;AAA2B;AACzB;AACZ;AACA;AACYd,cAAAA,OAAO,CAACS,KAAR,CAAc,sBAAd,EAAsCE,IAAI,CAACF,KAA3C;AACA;AACD;AAzBH;AA2BD,OArCD;AAsCD;AACF,GAtDD;AAuDD;;AAEDM,MAAM,CAACC,OAAP,GAAiBrB,qBAAjB","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict-local\n * @format\n */\n\n/* eslint-env browser */\n\n/* eslint-disable no-console */\n\"use strict\";\n\nconst injectUpdate = require(\"./injectUpdate\");\n\nfunction registerServiceWorker(swUrl) {\n  const serviceWorker = navigator.serviceWorker;\n\n  if (!serviceWorker) {\n    if (__DEV__) {\n      console.info(\"ServiceWorker not supported\");\n    }\n\n    return;\n  }\n\n  window.addEventListener(\"load\", function() {\n    const registrationPromise = serviceWorker.register(swUrl);\n\n    if (__DEV__) {\n      registrationPromise.then(\n        registration => {\n          console.info(\n            \"ServiceWorker registration successful with scope: \",\n            registration.scope\n          );\n        },\n        error => {\n          console.error(\"ServiceWorker registration failed: \", error);\n        }\n      );\n      serviceWorker.addEventListener(\"message\", event => {\n        const data = event.data;\n        /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment suppresses an\n         * error found when Flow v0.97 was deployed. To see the error delete\n         * this comment and run Flow. */\n\n        if (!(data instanceof Object) || typeof data.type !== \"string\") {\n          return;\n        }\n\n        switch (data.type) {\n          case \"METRO_UPDATE_START\": {\n            console.info(\"Metro update started.\");\n            break;\n          }\n\n          case \"METRO_UPDATE\": {\n            /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n             * suppresses an error found when Flow v0.97 was deployed. To see\n             * the error delete this comment and run Flow. */\n            console.info(\"Injecting metro update:\", data.body);\n            /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n             * suppresses an error found when Flow v0.97 was deployed. To see\n             * the error delete this comment and run Flow. */\n\n            injectUpdate(data.body);\n            break;\n          }\n\n          case \"METRO_UPDATE_ERROR\": {\n            /* $FlowFixMe(>=0.97.0 site=react_native_fb) This comment\n             * suppresses an error found when Flow v0.97 was deployed. To see\n             * the error delete this comment and run Flow. */\n            console.error(\"Metro update error: \", data.error);\n            break;\n          }\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = registerServiceWorker;\n"]},"metadata":{},"sourceType":"module"}