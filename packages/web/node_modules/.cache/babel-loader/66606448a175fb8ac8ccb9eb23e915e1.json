{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport * as Yup from \"yup\"; // Customizable Area Start\n\nimport { imgPasswordInVisible, imgPasswordVisible } from \"./assets\"; // Customizable Area End\n\nexport const configJSON = require(\"./config\");\nexport default class EmailAccountRegistrationController extends BlockComponent {\n  // Customizable Area Start\n  // Customizable Area End\n  constructor(props) {\n    super(props);\n    this.arrayholder = void 0;\n    this.passwordReg = void 0;\n    this.emailReg = void 0;\n    this.stringReg = void 0;\n    this.phoneReg = void 0;\n    this.numberReg = void 0;\n    this.createAccountApiCallId = void 0;\n    this.createNewAccountApiCallId = void 0;\n    this.validationApiCallId = \"\";\n    this.domainAvailabilityApiCallId = \"\";\n    this.imgPasswordVisible = void 0;\n    this.imgPasswordInVisible = void 0;\n    this.labelHeader = void 0;\n    this.labelFirstName = void 0;\n    this.lastName = void 0;\n    this.labelEmail = void 0;\n    this.labelPassword = void 0;\n    this.labelRePassword = void 0;\n    this.labelLegalText = void 0;\n    this.labelLegalTermCondition = void 0;\n    this.labelLegalPrivacyPolicy = void 0;\n    this.btnTextSignUp = void 0;\n    this.domainNameSuccessSymbol = void 0;\n\n    this.createAccount = values => {\n      const header = {\n        \"Content-Type\": configJSON.contentTypeApiAddDetail\n      };\n      const attrs = {\n        email: values.email,\n        company_name: values.companyName,\n        domain: \"\".concat(values.domainName, \".okyd.com\"),\n        fullname: values.fullName.trim(),\n        full_phone_number: values.phoneNumber,\n        address: values.address,\n        country: values.country.name,\n        teamMemberOkyd: values.teamMemberOkyd.name,\n        natureOfBussiness: values.natureOfBussiness.name,\n        clientTarget: values.clientTarget.name,\n        user_type: values.user_type || localStorage.getItem('user_type') || this.state.userType,\n        activated: this.state.activated || true\n      };\n      const data = {\n        type: \"email_account\",\n        attributes: attrs\n      };\n      const httpBody = {\n        data: data //   token: this.state.otpAuthToken,\n\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.createNewAccountApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.accountsAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.domainAvailability = domainValue => {\n      const header = {\n        \"Content-Type\": configJSON.contentTypeApiAddDetail\n      };\n      const attrs = {\n        domain: domainValue + \".okyd.com\"\n      };\n      const data = {\n        attributes: attrs\n      };\n      const httpBody = {\n        data: data\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.domainAvailabilityApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiDomainAvailability);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.btnLegalPrivacyPolicyProps = {\n      onClick: () => this.goToPrivacyPolicy()\n    };\n    this.btnLegalTermsAndConditionProps = {\n      onClick: () => this.goToTermsAndCondition()\n    };\n    this.txtInputEmailWebPrpos = {\n      onChange: text => {\n        this.setState({\n          errorEmail: \"\",\n          email: text.target.value\n        }); //@ts-ignore\n\n        this.txtInputEmailPrpos.value = text.target.value;\n      }\n    };\n    this.txtInputEmailMobilePrpos = _objectSpread(_objectSpread({}, this.txtInputEmailWebPrpos), {}, {\n      keyboardType: \"email-address\"\n    });\n    this.txtInputEmailPrpos = this.isPlatformWeb() ? this.txtInputEmailWebPrpos : this.txtInputEmailMobilePrpos;\n    this.txtInputCompanyNameWebPrpos = {\n      onChange: text => {\n        this.setState({\n          errorCompanyName: \"\",\n          companyName: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputDomainNameWebPrpos = {\n      onChange: text => {\n        this.setState({\n          errorDomainName: \"\",\n          domainName: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputFullNameWebPrpos = {\n      onChange: text => {\n        this.setState({\n          errorFullName: \"\",\n          fullName: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputPhoneNumberWebPrpos = {\n      onChange: text => {\n        //@ts-ignore\n        this.setState({\n          errorPhnNumber: \"\",\n          phoneNumber: text === null || text === void 0 ? void 0 : text.target.value\n        });\n      }\n    };\n    this.txtInputAddressWebPrpos = {\n      onChange: text => {\n        this.setState({\n          errorAddress: \"\",\n          address: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputCountryWebPrpos = {\n      onChange: text => {\n        this.setState({\n          country: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputTeamOkydWebPrpos = {\n      onChange: text => {\n        this.setState({\n          teamMemberOkyd: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputNatureofBussinessWebPrpos = {\n      onChange: text => {\n        this.setState({\n          natureOfBussiness: text.target.value\n        }); //@ts-ignore\n      }\n    };\n    this.txtInputTargetClientWebPrpos = {\n      onChange: text => {\n        this.setState({\n          clientTarget: text.target.value\n        }); //@ts-ignore\n      }\n    };\n\n    this.openSnackBarHandler = (type, message) => {\n      this.setState({\n        snackBar: {\n          show: true,\n          message: message,\n          type\n        }\n      });\n    };\n\n    this.closeSnackBarHandler = () => {\n      this.setState({\n        snackBar: {\n          show: false,\n          message: this.state.snackBar.message,\n          type: this.state.snackBar.type\n        }\n      });\n    };\n\n    this.subScribedMessages = [getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.NavigationPayLoadMessage), getName(MessageEnum.CountryCodeMessage)];\n    this.receive = this.receive.bind(this);\n    this.isStringNullOrBlank = this.isStringNullOrBlank.bind(this);\n    runEngine.attachBuildingBlock(this, this.subScribedMessages);\n    this.arrayholder = [];\n    this.passwordReg = new RegExp(\"\\\\w+\");\n    this.emailReg = new RegExp(\"\\\\w+\");\n    this.stringReg = new RegExp(/^([\\w]{3,})+\\s+([\\w\\s]{3,})+$/i);\n    this.phoneReg = new RegExp(/^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/);\n    this.numberReg = new RegExp(/^[0-9]*$/);\n    let NewAccSchema = {\n      email: Yup.string().email(configJSON.errorEmailNotValid).required(configJSON.errorEmailRequired),\n      companyName: Yup.string().required(configJSON.errorCompanyNameEmpty),\n      domainName: Yup.string().required(configJSON.errorDomainRequire),\n      fullName: Yup.string().matches(configJSON.fullNamePattern, configJSON.errorStingOnly).required(configJSON.errorFullNameEmpty),\n      phoneNumber: Yup.string().matches(this.phoneReg, configJSON.errorPhoneNumberNotValid).min(5, configJSON.errorPhoneNumberMin).max(10, configJSON.errorPhoneNumberMax).required(configJSON.errorPhoneNumberReqired),\n      address: Yup.string().min(20, configJSON.errorAddressMin).max(250, configJSON.errorAddressMax).required(configJSON.errorAddressEmpty),\n      country: Yup.string().nullable(),\n      teamMemberOkyd: Yup.string().nullable(),\n      natureOfBussiness: Yup.string().nullable(),\n      clientTarget: Yup.string().nullable()\n    };\n    this.state = {\n      // Customizable Area Start\n      email: \"\",\n      companyName: \"\",\n      domainName: \"\",\n      fullName: \"\",\n      phoneNumber: \"\",\n      address: \"\",\n      country: \"\",\n      teamMemberOkyd: \"\",\n      natureOfBussiness: \"\",\n      clientTarget: \"\",\n      userType: \"subscriber\",\n      activated: true,\n      errorMandatory: \"\",\n      errorEmail: \"\",\n      errorCompanyName: \"\",\n      errorDomainName: \"\",\n      errorFullName: \"\",\n      errorPhnNumber: \"\",\n      errorAddress: \"\",\n      errorCountry: \"\",\n      NewAccSchema: NewAccSchema,\n      snackBar: {\n        show: false\n      },\n      domainNameSuccessSymbol: true // Customizable Area End\n\n    }; // Customizable Area Start\n\n    this.imgPasswordVisible = imgPasswordVisible;\n    this.imgPasswordInVisible = imgPasswordInVisible;\n    this.labelHeader = configJSON.labelHeader;\n    this.labelFirstName = configJSON.labelFirstName;\n    this.lastName = configJSON.lastName;\n    this.labelEmail = configJSON.labelEmail;\n    this.labelPassword = configJSON.labelPassword;\n    this.labelRePassword = configJSON.labelRePassword;\n    this.labelLegalText = configJSON.labelLegalText;\n    this.labelLegalTermCondition = configJSON.labelLegalTermCondition;\n    this.labelLegalPrivacyPolicy = configJSON.labelLegalPrivacyPolicy;\n    this.btnTextSignUp = configJSON.btnTextSignUp; // Customizable Area End\n  }\n\n  receive(from, message) {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var responseJson, errorReponse, apiRequestCallId, errors, _this$props;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            // Customizable Area Start\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n              errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n              apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n\n              if (responseJson && !responseJson.errors) {\n                if (apiRequestCallId != null) {\n                  // \n                  if (apiRequestCallId === _this.createNewAccountApiCallId && responseJson !== undefined) {\n                    _this.openSnackBarHandler('success', configJSON.successCreateAccount);\n\n                    console.log(responseJson, \"data\");\n                    setTimeout(() => {\n                      //@ts-ignore\n                      localStorage.setItem(\"email\", responseJson.data.attributes.email);\n                      localStorage.setItem(\"auth\", responseJson.meta.token);\n                      localStorage.setItem(\"fullname\", responseJson.data.attributes.fullname); // @ts-ignore\n\n                      _this.props.history.push(\"email-send-successfully\");\n                    }, 1000);\n                  }\n\n                  if (apiRequestCallId === _this.domainAvailabilityApiCallId && responseJson !== undefined) {\n                    _this.setState({\n                      domainNameSuccessSymbol: responseJson.success\n                    });\n\n                    responseJson.success ? _this.openSnackBarHandler('success', \"Domain is available \") : _this.openSnackBarHandler('error', \"Domain is not available \");\n                  }\n                }\n              } else {\n                errors = responseJson.errors;\n\n                _this.parseApiCatchErrorResponse(errorReponse);\n\n                if (errors[0].token === 'Invalid token' || errors[0].token === 'Token has Expired') {\n                  localStorage.setItem(\"auth\", \"\"); //@ts-ignore\n\n                  (_this$props = _this.props) === null || _this$props === void 0 ? void 0 : _this$props.history.push(\"/login\");\n                } else if (errors[0].message) {\n                  _this.openSnackBarHandler('error', errors[0].message);\n                } else if (errors[0].account) {\n                  _this.openSnackBarHandler('error', errors[0].account);\n                }\n              }\n            } // Customizable Area End\n\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  } // Customizable Area Start\n\n\n  goToPrivacyPolicy() {\n    const msg = new Message(getName(MessageEnum.NavigationPrivacyPolicyMessage));\n    msg.addData(getName(MessageEnum.NavigationPropsMessage), this.props);\n    this.send(msg);\n  }\n\n  goToTermsAndCondition() {\n    const msg = new Message(getName(MessageEnum.NavigationTermAndConditionMessage));\n    msg.addData(getName(MessageEnum.NavigationPropsMessage), this.props);\n    this.send(msg);\n  }\n\n  isStringNullOrBlank(str) {\n    return str === null || str.length === 0;\n  }\n\n  isValidEmail(email) {\n    return this.emailReg.test(email);\n  }\n\n  getValidations() {\n    const headers = {\n      \"Content-Type\": configJSON.validationApiContentType\n    };\n    const getValidationsMsg = new Message(getName(MessageEnum.RestAPIRequestMessage));\n    this.validationApiCallId = getValidationsMsg.messageId;\n    getValidationsMsg.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.urlGetValidations);\n    getValidationsMsg.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n    getValidationsMsg.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.validationApiMethodType);\n    runEngine.sendMessage(getValidationsMsg.id, getValidationsMsg);\n  } //// handle domain name availability\n\n\n  isNonNullAndEmpty(value) {\n    return value !== undefined && value !== null && value !== \"null\" && value.trim().length > 0;\n  }\n\n  validateCountryCodeAndPhoneNumber(countryCode, phoneNumber) {\n    let error = null;\n\n    if (this.isNonNullAndEmpty(phoneNumber)) {\n      if (!this.isNonNullAndEmpty(String(countryCode))) {\n        error = configJSON.errorCountryCodeNotSelected;\n      }\n    } else if (this.isNonNullAndEmpty(countryCode)) {\n      if (!this.isNonNullAndEmpty(phoneNumber)) {\n        error = \"Phone \" + configJSON.errorBlankField;\n      }\n    }\n\n    return error;\n  } // Customizable Area End\n\n\n}","map":{"version":3,"sources":["/home/lp-greenapex/gargi/okydpim-36944-react-native/src/packages/blocks/email-account-registration/src/EmailAccountRegistrationController.web.tsx"],"names":["Message","BlockComponent","runEngine","MessageEnum","getName","Yup","imgPasswordInVisible","imgPasswordVisible","configJSON","require","EmailAccountRegistrationController","constructor","props","arrayholder","passwordReg","emailReg","stringReg","phoneReg","numberReg","createAccountApiCallId","createNewAccountApiCallId","validationApiCallId","domainAvailabilityApiCallId","labelHeader","labelFirstName","lastName","labelEmail","labelPassword","labelRePassword","labelLegalText","labelLegalTermCondition","labelLegalPrivacyPolicy","btnTextSignUp","domainNameSuccessSymbol","createAccount","values","header","contentTypeApiAddDetail","attrs","email","company_name","companyName","domain","domainName","fullname","fullName","trim","full_phone_number","phoneNumber","address","country","name","teamMemberOkyd","natureOfBussiness","clientTarget","user_type","localStorage","getItem","state","userType","activated","data","type","attributes","httpBody","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","accountsAPiEndPoint","RestAPIRequestHeaderMessage","JSON","stringify","RestAPIRequestBodyMessage","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","domainAvailability","domainValue","endPointApiDomainAvailability","btnLegalPrivacyPolicyProps","onClick","goToPrivacyPolicy","btnLegalTermsAndConditionProps","goToTermsAndCondition","txtInputEmailWebPrpos","onChange","text","setState","errorEmail","target","value","txtInputEmailPrpos","txtInputEmailMobilePrpos","keyboardType","isPlatformWeb","txtInputCompanyNameWebPrpos","errorCompanyName","txtInputDomainNameWebPrpos","errorDomainName","txtInputFullNameWebPrpos","errorFullName","txtInputPhoneNumberWebPrpos","errorPhnNumber","txtInputAddressWebPrpos","errorAddress","txtInputCountryWebPrpos","txtInputTeamOkydWebPrpos","txtInputNatureofBussinessWebPrpos","txtInputTargetClientWebPrpos","openSnackBarHandler","message","snackBar","show","closeSnackBarHandler","subScribedMessages","RestAPIResponceMessage","NavigationPayLoadMessage","CountryCodeMessage","receive","bind","isStringNullOrBlank","attachBuildingBlock","RegExp","NewAccSchema","string","errorEmailNotValid","required","errorEmailRequired","errorCompanyNameEmpty","errorDomainRequire","matches","fullNamePattern","errorStingOnly","errorFullNameEmpty","errorPhoneNumberNotValid","min","errorPhoneNumberMin","max","errorPhoneNumberMax","errorPhoneNumberReqired","errorAddressMin","errorAddressMax","errorAddressEmpty","nullable","errorMandatory","errorCountry","from","responseJson","getData","RestAPIResponceSuccessMessage","errorReponse","RestAPIResponceErrorMessage","apiRequestCallId","RestAPIResponceDataMessage","errors","undefined","successCreateAccount","console","log","setTimeout","setItem","meta","token","history","push","success","parseApiCatchErrorResponse","account","msg","NavigationPrivacyPolicyMessage","NavigationPropsMessage","send","NavigationTermAndConditionMessage","str","length","isValidEmail","test","getValidations","headers","validationApiContentType","getValidationsMsg","urlGetValidations","validationApiMethodType","isNonNullAndEmpty","validateCountryCodeAndPhoneNumber","countryCode","error","String","errorCountryCodeNotSelected","errorBlankField"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport MessageEnum, {\n  getName,\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport { isEmpty } from 'lodash'\nimport * as Yup from \"yup\";\n\n// Customizable Area Start\nimport { imgPasswordInVisible, imgPasswordVisible } from \"./assets\";\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n  navigation: any;\n  id: string;\n}\n\nexport interface S {\n  // Customizable Area Start\n  fullName: string;\n  companyName: string;\n  phoneNumber: string;\n  email: string;\n  userType: string;\n  domainName: string;\n  address: string;\n  country: string;\n  teamMemberOkyd: string;\n  natureOfBussiness: string;\n  clientTarget: string;\n  errorMandatory: string;\n  errorEmail: string;\n  errorCompanyName: string;\n  errorDomainName: string;\n  errorFullName: string;\n  errorPhnNumber: string;\n  errorAddress: string;\n  errorCountry: string;\n  activated: boolean;\n  NewAccSchema: any;\n  snackBar: {\n    show: boolean,\n    message?: string,\n    type?: \"success\" | \"info\" | \"warning\" | \"error\" | undefined\n  };\n  domainNameSuccessSymbol: any\n  // Customizable Area End\n}\n\nexport interface SS {\n  // Customizable Area Start\n  id: any;\n  // Customizable Area End\n}\n\n\nexport default class EmailAccountRegistrationController extends BlockComponent<\n  Props,\n  S,\n  SS\n  > {\n  // Customizable Area Start\n  arrayholder: any[];\n  passwordReg: RegExp;\n  emailReg: RegExp;\n  stringReg: RegExp;\n  phoneReg: RegExp;\n  numberReg: RegExp;\n  createAccountApiCallId: any;\n  createNewAccountApiCallId: any;\n\n  validationApiCallId: string = \"\";\n  domainAvailabilityApiCallId: string = \"\";\n  imgPasswordVisible: any;\n  imgPasswordInVisible: any;\n\n  labelHeader: any;\n  labelFirstName: string;\n  lastName: string;\n  labelEmail: string;\n  labelPassword: string;\n  labelRePassword: string;\n  labelLegalText: string;\n  labelLegalTermCondition: string;\n  labelLegalPrivacyPolicy: string;\n  btnTextSignUp: string;\n  domainNameSuccessSymbol: boolean\n\n\n  // Customizable Area End\n\n  constructor(props: Props) {\n    super(props);\n    this.subScribedMessages = [\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.NavigationPayLoadMessage),\n      getName(MessageEnum.CountryCodeMessage),\n    ];\n    this.receive = this.receive.bind(this);\n    this.isStringNullOrBlank = this.isStringNullOrBlank.bind(this);\n\n    runEngine.attachBuildingBlock(this, this.subScribedMessages);\n\n    this.arrayholder = [];\n    this.passwordReg = new RegExp(\"\\\\w+\");\n    this.emailReg = new RegExp(\"\\\\w+\");\n    this.stringReg = new RegExp(/^([\\w]{3,})+\\s+([\\w\\s]{3,})+$/i);\n    this.phoneReg = new RegExp(/^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/);\n    this.numberReg = new RegExp(/^[0-9]*$/);\n\n\n    let NewAccSchema = {\n      email: Yup.string()\n        .email(configJSON.errorEmailNotValid)\n        .required(configJSON.errorEmailRequired),\n      companyName: Yup.string().required(configJSON.errorCompanyNameEmpty),\n      domainName: Yup.string()\n        .required(configJSON.errorDomainRequire),\n      fullName: Yup.string()\n        .matches(configJSON.fullNamePattern, configJSON.errorStingOnly)\n        .required(configJSON.errorFullNameEmpty),\n      phoneNumber: Yup.string()\n        .matches(this.phoneReg, configJSON.errorPhoneNumberNotValid)\n        .min(5, configJSON.errorPhoneNumberMin)\n        .max(10, configJSON.errorPhoneNumberMax)\n        .required(configJSON.errorPhoneNumberReqired),\n      address: Yup.string()\n        .min(20, configJSON.errorAddressMin)\n        .max(250, configJSON.errorAddressMax)\n        .required(configJSON.errorAddressEmpty),\n      country: Yup.string().nullable(),\n      teamMemberOkyd: Yup.string().nullable(),\n      natureOfBussiness: Yup.string().nullable(),\n      clientTarget: Yup.string().nullable()\n    };\n\n\n    this.state = {\n      // Customizable Area Start\n      email: \"\",\n      companyName: \"\",\n      domainName: \"\",\n      fullName: \"\",\n      phoneNumber: \"\",\n      address: \"\",\n      country: \"\",\n      teamMemberOkyd: \"\",\n      natureOfBussiness: \"\",\n      clientTarget: \"\",\n      userType: \"subscriber\",\n      activated: true,\n      errorMandatory: \"\",\n      errorEmail: \"\",\n      errorCompanyName: \"\",\n      errorDomainName: \"\",\n      errorFullName: \"\",\n      errorPhnNumber: \"\",\n      errorAddress: \"\",\n      errorCountry: \"\",\n      NewAccSchema: NewAccSchema,\n      snackBar: {\n        show: false,\n      },\n      domainNameSuccessSymbol: true\n\n      // Customizable Area End\n    };\n\n    // Customizable Area Start\n\n\n    this.imgPasswordVisible = imgPasswordVisible;\n    this.imgPasswordInVisible = imgPasswordInVisible;\n\n    this.labelHeader = configJSON.labelHeader;\n    this.labelFirstName = configJSON.labelFirstName;\n    this.lastName = configJSON.lastName;\n    this.labelEmail = configJSON.labelEmail;\n    this.labelPassword = configJSON.labelPassword;\n    this.labelRePassword = configJSON.labelRePassword;\n    this.labelLegalText = configJSON.labelLegalText;\n    this.labelLegalTermCondition = configJSON.labelLegalTermCondition;\n    this.labelLegalPrivacyPolicy = configJSON.labelLegalPrivacyPolicy;\n    this.btnTextSignUp = configJSON.btnTextSignUp;\n    // Customizable Area End\n  }\n\n\n\n  async receive(from: string, message: Message) {\n    // Customizable Area Start\n\n    if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      var errorReponse = message.getData(\n        getName(MessageEnum.RestAPIResponceErrorMessage)\n      );\n      const apiRequestCallId = message.getData(\n        getName(MessageEnum.RestAPIResponceDataMessage)\n      );\n      if (responseJson && !responseJson.errors) {\n        if (apiRequestCallId != null) {\n          // \n          if (apiRequestCallId === this.createNewAccountApiCallId && responseJson !== undefined) {\n            this.openSnackBarHandler('success', configJSON.successCreateAccount);\n            console.log(responseJson, \"data\")\n            setTimeout(() => {\n              //@ts-ignore\n              localStorage.setItem(\"email\", responseJson.data.attributes.email);\n              localStorage.setItem(\"auth\", responseJson.meta.token);\n              localStorage.setItem(\n                \"fullname\",\n                responseJson.data.attributes.fullname\n              );\n              // @ts-ignore\n              this.props.history.push(\"email-send-successfully\");\n            }, 1000);\n          }\n          if (apiRequestCallId === this.domainAvailabilityApiCallId && responseJson !== undefined) {\n            this.setState({\n              domainNameSuccessSymbol: responseJson.success\n            })\n            responseJson.success ?\n              this.openSnackBarHandler('success', \"Domain is available \") : this.openSnackBarHandler('error', \"Domain is not available \")\n          }\n        }\n      } else {\n        const errors = responseJson.errors;\n        this.parseApiCatchErrorResponse(errorReponse);\n        if (errors[0].token === 'Invalid token' || errors[0].token === 'Token has Expired') {\n          localStorage.setItem(\"auth\", \"\");\n          //@ts-ignore\n          this.props?.history.push(\"/login\");\n        } else if (errors[0].message) {\n          this.openSnackBarHandler('error', errors[0].message);\n        } else if (errors[0].account) {\n          this.openSnackBarHandler('error', errors[0].account);\n        }\n      }\n    }\n    // Customizable Area End\n  }\n\n  // Customizable Area Start\n  goToPrivacyPolicy() {\n    const msg: Message = new Message(\n      getName(MessageEnum.NavigationPrivacyPolicyMessage)\n    );\n    msg.addData(getName(MessageEnum.NavigationPropsMessage), this.props);\n    this.send(msg);\n  }\n\n  goToTermsAndCondition() {\n    const msg: Message = new Message(\n      getName(MessageEnum.NavigationTermAndConditionMessage)\n    );\n    msg.addData(getName(MessageEnum.NavigationPropsMessage), this.props);\n    this.send(msg);\n  }\n\n  isStringNullOrBlank(str: string) {\n    return str === null || str.length === 0;\n  }\n\n  isValidEmail(email: string) {\n    return this.emailReg.test(email);\n  }\n\n  createAccount = (values: any): boolean => {\n    const header = {\n      \"Content-Type\": configJSON.contentTypeApiAddDetail,\n    };\n\n    const attrs = {\n      email: values.email,\n      company_name: values.companyName,\n      domain: `${values.domainName}.okyd.com`,\n      fullname: values.fullName.trim(),\n      full_phone_number: values.phoneNumber,\n      address: values.address,\n      country: values.country.name,\n      teamMemberOkyd: values.teamMemberOkyd.name,\n      natureOfBussiness: values.natureOfBussiness.name,\n      clientTarget: values.clientTarget.name,\n      user_type: values.user_type || localStorage.getItem('user_type') || this.state.userType,\n      activated: this.state.activated || true,\n    };\n\n    const data = {\n      type: \"email_account\",\n      attributes: attrs,\n    };\n\n    const httpBody = {\n      data: data,\n      //   token: this.state.otpAuthToken,\n    };\n\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.createNewAccountApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.accountsAPiEndPoint\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeAddDetail\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n    return true;\n  }\n\n  getValidations() {\n    const headers = {\n      \"Content-Type\": configJSON.validationApiContentType,\n    };\n\n    const getValidationsMsg = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.validationApiCallId = getValidationsMsg.messageId;\n\n    getValidationsMsg.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.urlGetValidations\n    );\n\n    getValidationsMsg.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n    getValidationsMsg.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.validationApiMethodType\n    );\n    runEngine.sendMessage(getValidationsMsg.id, getValidationsMsg);\n  }\n\n  //// handle domain name availability\n\n\n  domainAvailability = (domainValue: any): boolean => {\n    const header = {\n      \"Content-Type\": configJSON.contentTypeApiAddDetail,\n    };\n\n\n    const attrs = {\n      domain: domainValue + \".okyd.com\"\n    };\n\n    const data = {\n      attributes: attrs,\n    };\n\n    const httpBody = {\n      data: data,\n    };\n\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.domainAvailabilityApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiDomainAvailability\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeAddDetail\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n\n  isNonNullAndEmpty(value: String) {\n    return (\n      value !== undefined &&\n      value !== null &&\n      value !== \"null\" &&\n      value.trim().length > 0\n    );\n  }\n\n  validateCountryCodeAndPhoneNumber(countryCode: string, phoneNumber: string) {\n    let error = null;\n\n    if (this.isNonNullAndEmpty(phoneNumber)) {\n      if (!this.isNonNullAndEmpty(String(countryCode))) {\n        error = configJSON.errorCountryCodeNotSelected;\n      }\n    } else if (this.isNonNullAndEmpty(countryCode)) {\n      if (!this.isNonNullAndEmpty(phoneNumber)) {\n        error = \"Phone \" + configJSON.errorBlankField;\n      }\n    }\n\n    return error;\n  }\n\n\n  btnLegalPrivacyPolicyProps = {\n    onClick: () => this.goToPrivacyPolicy(),\n  };\n\n  btnLegalTermsAndConditionProps = {\n    onClick: () => this.goToTermsAndCondition(),\n  };\n\n  txtInputEmailWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({\n        errorEmail: \"\",\n        email: text.target.value,\n      });\n      //@ts-ignore\n      this.txtInputEmailPrpos.value = text.target.value;\n    },\n  };\n\n  txtInputEmailMobilePrpos = {\n    ...this.txtInputEmailWebPrpos,\n    keyboardType: \"email-address\",\n  };\n\n  txtInputEmailPrpos = this.isPlatformWeb()\n    ? this.txtInputEmailWebPrpos\n    : this.txtInputEmailMobilePrpos;\n\n  txtInputCompanyNameWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({\n        errorCompanyName: \"\",\n        companyName: text.target.value,\n      });\n      //@ts-ignore\n    },\n  };\n\n  txtInputDomainNameWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({\n        errorDomainName: \"\",\n        domainName: text.target.value,\n      });\n      //@ts-ignore\n    },\n  };\n\n  txtInputFullNameWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({\n        errorFullName: \"\",\n        fullName: text.target.value,\n      });\n      //@ts-ignore\n    },\n  };\n\n  txtInputPhoneNumberWebPrpos = {\n    onChange: (text: Number) => {\n      //@ts-ignore\n      this.setState({ errorPhnNumber: \"\", phoneNumber: text?.target.value });\n    },\n  };\n\n  txtInputAddressWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({ errorAddress: \"\", address: text.target.value });\n      //@ts-ignore\n    },\n  };\n\n  txtInputCountryWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({ country: text.target.value });\n      //@ts-ignore\n    },\n  };\n\n  txtInputTeamOkydWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({ teamMemberOkyd: text.target.value });\n      //@ts-ignore\n    },\n  };\n\n  txtInputNatureofBussinessWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({ natureOfBussiness: text.target.value });\n      //@ts-ignore\n    },\n  };\n\n  txtInputTargetClientWebPrpos = {\n    onChange: (text: any) => {\n      this.setState({ clientTarget: text.target.value });\n      //@ts-ignore\n    },\n  };\n\n\n\n  // Open View Details Modal\n  openSnackBarHandler = (type: \"success\" | \"info\" | \"warning\" | \"error\" | undefined, message: string): void => {\n    this.setState({\n      snackBar: {\n        show: true,\n        message: message,\n        type\n      }\n    });\n  };\n\n  // Close View Details Modal\n  closeSnackBarHandler = () => {\n    this.setState({\n      snackBar: {\n        show: false,\n        message: this.state.snackBar.message,\n        type: this.state.snackBar.type\n      }\n    });\n  };\n\n\n  // Customizable Area End\n}\n"]},"metadata":{},"sourceType":"module"}