{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\"; // Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\nexport default class SortingController extends BlockComponent {\n  constructor(props) {\n    super(props);\n    this.getProductApiCallId = void 0;\n    this.getSortAscApiCallId = void 0;\n    this.getSortDescApiCallId = void 0;\n    this.getsortNewApiCallId = void 0;\n    this.getPopularityApiCallId = void 0;\n\n    this.getToken = () => {\n      const msg = new Message(getName(MessageEnum.SessionRequestMessage));\n      this.send(msg);\n    };\n\n    this.getListRequest = token => {\n      console.log(this.state.token, \"getListRequest\");\n      const header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: token\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getProductApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.productAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    this.sortPriceAsc = () => {\n      const header = {\n        token: this.state.token\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getSortAscApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.SortAscAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      this.setState({\n        isVisible: false\n      });\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    this.sortPriceDesc = () => {\n      const header = {\n        token: this.state.token\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getSortDescApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.SortDescAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      this.setState({\n        isVisible: false\n      });\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    this.sortNewest = () => {\n      const header = {\n        token: this.state.token\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getsortNewApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.SortNewestAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      this.setState({\n        isVisible: false\n      });\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    this.sortPopularity = () => {\n      const header = {\n        token: this.state.token\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getPopularityApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.SortPopularityAPiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      this.setState({\n        isVisible: false\n      });\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    this.receive = this.receive.bind(this); // Customizable Area Start\n\n    this.subScribedMessages = [getName(MessageEnum.AccoutLoginSuccess), getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.SessionSaveMessage), getName(MessageEnum.SessionResponseMessage)];\n    this.state = {\n      isVisible: false,\n      token: \"\",\n      data: \"\",\n      priceLowtoHigh: false,\n      priceHightoLow: false,\n      newestProduct: false,\n      popular: false\n    }; // Customizable Area End\n\n    runEngine.attachBuildingBlock(this, this.subScribedMessages);\n  }\n\n  componentDidMount() {\n    var _superprop_getComponentDidMount = () => super.componentDidMount,\n        _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _superprop_getComponentDidMount().call(_this);\n\n            _this.getToken();\n\n            if (_this.isPlatformWeb() === false) {\n              _this.props.navigation.addListener(\"willFocus\", () => {\n                _this.getToken();\n              });\n            }\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  receive(from, message) {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var token, responseJson, errorReponse;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            // Customizable Area Start\n            if (getName(MessageEnum.SessionResponseMessage) === message.id) {\n              runEngine.debugLog(\"Message Recived\", message);\n              token = message.getData(getName(MessageEnum.SessionResponseToken));\n\n              _this2.setState({\n                token: token\n              });\n\n              _this2.getListRequest(token);\n            }\n\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id && _this2.getProductApiCallId != null && _this2.getProductApiCallId === message.getData(getName(MessageEnum.RestAPIResponceDataMessage))) {\n              console.log(JSON.stringify(message));\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson && !responseJson.errors && responseJson.data) {\n                _this2.setState({\n                  data: responseJson.data\n                });\n              } else {\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiErrorResponse(responseJson);\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n              }\n            }\n\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id && _this2.getSortAscApiCallId != null && _this2.getSortAscApiCallId === message.getData(getName(MessageEnum.RestAPIResponceDataMessage))) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n              console.log(\"responseJson sort\", responseJson);\n\n              if (responseJson && !responseJson.errors && responseJson.data) {\n                _this2.setState({\n                  data: responseJson.data,\n                  priceLowtoHigh: true,\n                  priceHightoLow: false,\n                  newestProduct: false,\n                  popular: false\n                });\n\n                console.log(\"responseJson sort data\", _this2.state.data);\n              } else {\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n              }\n            }\n\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id && _this2.getSortDescApiCallId != null && _this2.getSortDescApiCallId === message.getData(getName(MessageEnum.RestAPIResponceDataMessage))) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson && !responseJson.errors && responseJson.data) {\n                _this2.setState({\n                  data: responseJson.data,\n                  priceLowtoHigh: false,\n                  priceHightoLow: true,\n                  newestProduct: false,\n                  popular: false\n                });\n              } else {\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n              }\n            }\n\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id && _this2.getsortNewApiCallId != null && _this2.getsortNewApiCallId === message.getData(getName(MessageEnum.RestAPIResponceDataMessage))) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson && !responseJson.errors && responseJson.data) {\n                _this2.setState({\n                  data: responseJson.data,\n                  priceLowtoHigh: false,\n                  priceHightoLow: false,\n                  newestProduct: true,\n                  popular: false\n                });\n              } else {\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n              }\n            }\n\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id && _this2.getPopularityApiCallId != null && _this2.getPopularityApiCallId === message.getData(getName(MessageEnum.RestAPIResponceDataMessage))) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson && !responseJson.errors && responseJson.data) {\n                _this2.setState({\n                  data: responseJson.data,\n                  priceLowtoHigh: false,\n                  priceHightoLow: false,\n                  newestProduct: false,\n                  popular: true\n                });\n              } else {\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n              }\n            } // Customizable Area End\n\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  } // Customizable Area Start\n\n\n  modalVisible() {\n    this.setState({\n      isVisible: !this.state.isVisible\n    });\n  } // Customizable Area End\n\n\n}","map":{"version":3,"sources":["/home/lp-greenapex/gargi/okydpim-36944-react-native/src/packages/blocks/sorting/src/SortingController.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","configJSON","require","SortingController","constructor","props","getProductApiCallId","getSortAscApiCallId","getSortDescApiCallId","getsortNewApiCallId","getPopularityApiCallId","getToken","msg","SessionRequestMessage","send","getListRequest","token","console","log","state","header","productApiContentType","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","productAPiEndPoint","RestAPIRequestHeaderMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeGet","sendMessage","id","sortPriceAsc","SortAscAPiEndPoint","setState","isVisible","sortPriceDesc","SortDescAPiEndPoint","sortNewest","SortNewestAPiEndPoint","sortPopularity","SortPopularityAPiEndPoint","receive","bind","subScribedMessages","AccoutLoginSuccess","RestAPIResponceMessage","SessionSaveMessage","SessionResponseMessage","data","priceLowtoHigh","priceHightoLow","newestProduct","popular","attachBuildingBlock","componentDidMount","isPlatformWeb","navigation","addListener","from","message","debugLog","getData","SessionResponseToken","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errors","errorReponse","RestAPIResponceErrorMessage","parseApiErrorResponse","parseApiCatchErrorResponse","modalVisible"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n  getName\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\n\n// Customizable Area Start\n\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n  navigation: any;\n  id: string;\n  // Customizable Area Start\n  // Customizable Area End\n}\n\ninterface S {\n  // Customizable Area Start\n  isVisible: boolean;\n  token: string;\n  data: any;\n  priceLowtoHigh: boolean;\n  priceHightoLow: boolean;\n  newestProduct: boolean;\n  popular: boolean;\n  // Customizable Area End\n}\n\ninterface SS {\n  id: any;\n}\n\nexport default class SortingController extends BlockComponent<Props, S, SS> {\n  getProductApiCallId: any;\n  getSortAscApiCallId: any;\n  getSortDescApiCallId: any;\n  getsortNewApiCallId: any;\n  getPopularityApiCallId: any;\n  constructor(props: Props) {\n    super(props);\n    this.receive = this.receive.bind(this);\n\n    // Customizable Area Start\n    this.subScribedMessages = [\n      getName(MessageEnum.AccoutLoginSuccess),\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.SessionSaveMessage),\n      getName(MessageEnum.SessionResponseMessage)\n    ];\n\n    this.state = {\n      isVisible: false,\n      token: \"\",\n      data: \"\",\n      priceLowtoHigh: false,\n      priceHightoLow: false,\n      newestProduct: false,\n      popular: false\n    };\n    // Customizable Area End\n    runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n  }\n  async componentDidMount() {\n    super.componentDidMount();\n    this.getToken();\n    if (this.isPlatformWeb() === false) {\n      this.props.navigation.addListener(\"willFocus\", () => {\n        this.getToken();\n      });\n    }\n  }\n  getToken = () => {\n    const msg: Message = new Message(\n      getName(MessageEnum.SessionRequestMessage)\n    );\n    this.send(msg);\n  };\n  async receive(from: string, message: Message) {\n    // Customizable Area Start\n    if (getName(MessageEnum.SessionResponseMessage) === message.id) {\n      runEngine.debugLog(\"Message Recived\", message);\n\n      let token = message.getData(getName(MessageEnum.SessionResponseToken));\n      this.setState({ token: token });\n      this.getListRequest(token);\n    }\n    if (\n      getName(MessageEnum.RestAPIResponceMessage) === message.id &&\n      this.getProductApiCallId != null &&\n      this.getProductApiCallId ===\n        message.getData(getName(MessageEnum.RestAPIResponceDataMessage))\n    ) {\n      console.log(JSON.stringify(message));\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      if (responseJson && !responseJson.errors && responseJson.data) {\n        this.setState({\n          data: responseJson.data\n        });\n      } else {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiErrorResponse(responseJson);\n        this.parseApiCatchErrorResponse(errorReponse);\n      }\n    }\n    if (\n      getName(MessageEnum.RestAPIResponceMessage) === message.id &&\n      this.getSortAscApiCallId != null &&\n      this.getSortAscApiCallId ===\n        message.getData(getName(MessageEnum.RestAPIResponceDataMessage))\n    ) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      console.log(\"responseJson sort\", responseJson);\n      if (responseJson && !responseJson.errors && responseJson.data) {\n        this.setState({\n          data: responseJson.data,\n          priceLowtoHigh: true,\n          priceHightoLow: false,\n          newestProduct: false,\n          popular: false\n        });\n        console.log(\"responseJson sort data\", this.state.data);\n      } else {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n      }\n    }\n    if (\n      getName(MessageEnum.RestAPIResponceMessage) === message.id &&\n      this.getSortDescApiCallId != null &&\n      this.getSortDescApiCallId ===\n        message.getData(getName(MessageEnum.RestAPIResponceDataMessage))\n    ) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      if (responseJson && !responseJson.errors && responseJson.data) {\n        this.setState({\n          data: responseJson.data,\n          priceLowtoHigh: false,\n          priceHightoLow: true,\n          newestProduct: false,\n          popular: false\n        });\n      } else {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n      }\n    }\n    if (\n      getName(MessageEnum.RestAPIResponceMessage) === message.id &&\n      this.getsortNewApiCallId != null &&\n      this.getsortNewApiCallId ===\n        message.getData(getName(MessageEnum.RestAPIResponceDataMessage))\n    ) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      if (responseJson && !responseJson.errors && responseJson.data) {\n        this.setState({\n          data: responseJson.data,\n          priceLowtoHigh: false,\n          priceHightoLow: false,\n          newestProduct: true,\n          popular: false\n        });\n      } else {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n      }\n    }\n    if (\n      getName(MessageEnum.RestAPIResponceMessage) === message.id &&\n      this.getPopularityApiCallId != null &&\n      this.getPopularityApiCallId ===\n        message.getData(getName(MessageEnum.RestAPIResponceDataMessage))\n    ) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n      if (responseJson && !responseJson.errors && responseJson.data) {\n        this.setState({\n          data: responseJson.data,\n          priceLowtoHigh: false,\n          priceHightoLow: false,\n          newestProduct: false,\n          popular: true\n        });\n      } else {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n      }\n    }\n\n    // Customizable Area End\n  }\n\n  // Customizable Area Start\n  modalVisible() {\n    this.setState({ isVisible: !this.state.isVisible });\n  }\n  getListRequest = (token: any) => {\n    console.log(this.state.token, \"getListRequest\");\n    const header = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: token\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.getProductApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.productAPiEndPoint\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n  sortPriceAsc = () => {\n    const header = {\n      token: this.state.token\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.getSortAscApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.SortAscAPiEndPoint\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    this.setState({ isVisible: false });\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n  sortPriceDesc = () => {\n    const header = {\n      token: this.state.token\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.getSortDescApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.SortDescAPiEndPoint\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    this.setState({ isVisible: false });\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n  sortNewest = () => {\n    const header = {\n      token: this.state.token\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.getsortNewApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.SortNewestAPiEndPoint\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    this.setState({ isVisible: false });\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n  sortPopularity = () => {\n    const header = {\n      token: this.state.token\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    this.getPopularityApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.SortPopularityAPiEndPoint\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    this.setState({ isVisible: false });\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n\n  // Customizable Area End\n}\n"]},"metadata":{},"sourceType":"module"}