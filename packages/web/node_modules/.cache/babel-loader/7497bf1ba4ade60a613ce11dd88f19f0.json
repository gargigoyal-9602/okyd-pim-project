{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport RichTextEditor from \"react-rte\";\nimport { orderBy } from \"lodash\";\nimport * as Yup from \"yup\"; // Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\nexport default class CatalogueController extends BlockComponent {\n  constructor(props) {\n    super(props);\n    this.getProductApiCallId = void 0;\n    this.getProductListingApiCallId = void 0;\n    this.getBrandListingApiCallId = void 0;\n    this.getCategoryListingApiCallId = void 0;\n    this.putActiveStatusOfProductApiCallId = void 0;\n    this.catalogueCreateApiCallId = void 0;\n\n    this.openSnackBarHandler = (type, message) => {\n      this.setState({\n        snackBar: {\n          show: true,\n          message: message,\n          type\n        }\n      });\n    };\n\n    this.closeSnackBarHandler = () => {\n      this.setState({\n        snackBar: {\n          show: false,\n          message: this.state.snackBar.message,\n          type: this.state.snackBar.type\n        }\n      });\n    };\n\n    this.getProductListing = () => {\n      const headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getProductListingApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.productListApiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.getBrandListing = () => {\n      const headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getBrandListingApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.brandListApiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.getCategoryListing = () => {\n      const headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getCategoryListingApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.categoryListApiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.handleActiveStatusOfProduct = (value, id) => {\n      const header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      }; // const attrs = values;\n      // const data = {\n      //   type: this.state.email,\n      //   attributes: attrs,\n      // };\n\n      const httpBody = {\n        active: value\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      const endPointApi = configJSON.putActiveStatusEndPointAPi + id;\n      this.putActiveStatusOfProductApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), endPointApi);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypePut);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.createCategory = values => {\n      const headers = {\n        \"Content-Type\": configJSON.apiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      };\n      console.log(values, \"value\");\n      var formData = new FormData();\n      formData.append('name', values.productName);\n      formData.append('description', values.description);\n      formData.append('category', values.category);\n      formData.append('sku', values.sku);\n      formData.append('active', values.active);\n      formData.append('brand', values.brand);\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.catalogueCreateApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.catalogueCreateEndPointApi);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(formData));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypePost);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.getToken = () => {\n      const msg = new Message(getName(MessageEnum.SessionRequestMessage));\n      this.send(msg);\n    };\n\n    this.handleCheckBox = (index, value) => {\n      let arr = Object.assign([], this.state.displayProducts, {\n        [index]: _objectSpread(_objectSpread({}, this.state.displayProducts[index]), {}, {\n          checkboxStatus: value\n        })\n      }); // let link;\n      // this.state.displayProducts.includes();\n\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        displayProducts: arr\n      }));\n    };\n\n    this.handleToggle = (index, value) => {\n      let arr = Object.assign([], this.state.displayProducts, {\n        [index]: _objectSpread(_objectSpread({}, this.state.displayProducts[index]), {}, {\n          activeStatus: value\n        })\n      });\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        displayProducts: arr\n      }));\n      this.handleActiveStatusOfProduct(value, this.state.displayProducts[index].id);\n    };\n\n    this.onMenuToggle = () => {\n      this.setState({\n        menuCollapsed: !this.state.menuCollapsed // {this.handleToggle(index,e.)}\n\n      });\n    };\n\n    this.handleToggleAddProductModal = () => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        addNewProductModal: !this.state.addNewProductModal\n      }));\n    };\n\n    this.handleToggleAddVariationModal = () => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        addNewVariationModal: !this.state.addNewVariationModal\n      }));\n    };\n\n    this.handleImageUpload = event => {\n      var file = event.target.files[0];\n      const reader = new FileReader();\n      var url = reader.readAsDataURL(file);\n\n      reader.onloadend = e => {\n        this.setState({\n          selectedFile: [reader.result]\n        });\n      };\n\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.handleOnDrop = file => {\n      this.setState({\n        acceptedFiles: this.state.acceptedFiles.concat(file)\n      });\n    };\n\n    this.handleSortingName = () => {\n      this.setState({\n        sortName: this.state.sortName !== 'asc' ? 'asc' : 'desc'\n      });\n      setTimeout(() => {\n        const sortedData = orderBy(this.state.displayProducts, item => item.attributes.name.toLowerCase(), this.state.sortName);\n        this.setState({\n          displayProducts: sortedData\n        });\n      }, 500);\n    };\n\n    this.handleSortingPricing = () => {\n      this.setState({\n        sortPricing: this.state.sortPricing !== 'asc' ? 'asc' : 'desc'\n      });\n      setTimeout(() => {\n        const sortedData = orderBy(this.state.displayProducts, item => item.attributes.price, this.state.sortPricing);\n        this.setState({\n          displayProducts: sortedData\n        });\n      }, 500);\n    };\n\n    this.receive = this.receive.bind(this); // Customizable Area Start\n\n    this.subScribedMessages = [getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.SessionSaveMessage), getName(MessageEnum.SessionResponseMessage)];\n    let AddProductsSchema = {\n      productName: Yup.string().required(configJSON.errorProductName),\n      sku: Yup.string().required(configJSON.errorSku),\n      brand: Yup.string().required(configJSON.errorBrand),\n      category: Yup.string().required(configJSON.errorCategory),\n      status: Yup.string().required(configJSON.errorStatus)\n    };\n    let NewVariationTypeSchema = {\n      variationName: Yup.string().required(configJSON.errorVariationName),\n      variationCode: Yup.string().required(configJSON.errorVariationCode),\n      friends: Yup.array().of(Yup.string().min(4, 'too short').required('Required')).required('Must have variant') // these constraints are shown if and only if inner constraints are satisfied\n      .min(1, 'Minimum of 1 variant required')\n    };\n    this.state = {\n      allCheckboxStatus: true,\n      arrayHolder: [],\n      menuCollapsed: false,\n      acceptedFiles: [],\n      userType: configJSON.subscriber,\n      token: \"\",\n      addNewVariationModal: false,\n      snackBar: {\n        show: false\n      },\n      addNewProductModal: false,\n      selectedFile: null,\n      editor: RichTextEditor.createEmptyValue(),\n      displayProducts: \"\",\n      brandData: [],\n      categoryData: [],\n      sortPricing: null,\n      sortName: null,\n      AddProductsSchema: AddProductsSchema,\n      NewVariationTypeSchema: NewVariationTypeSchema,\n      productName: \"\",\n      sku: \"\",\n      brand: \"\",\n      category: \"\",\n      status: \"\",\n      variationCode: \"\",\n      variationName: \"\",\n      friends: []\n    }; // Customizable Area End\n\n    runEngine.attachBuildingBlock(this, this.subScribedMessages);\n  } //   async componentDidMount() {\n  //     super.componentDidMount();\n  //     this.getToken();\n  //     if (this.isPlatformWeb() === false) {\n  //       this.props.navigation.addListener(\"willFocus\", () => {\n  //         this.getToken();\n  //       });\n  //     }\n  //   }\n  // Customizable Area Start\n\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.getProductListing();\n\n            _this.getBrandListing();\n\n            _this.getCategoryListing();\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  receive(from, message) {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var responseJson, apiRequestCallId, brandData, categoryData, errors, errorReponse, _this2$props;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            // Customizable Area Start\n            // runEngine.debugLog(\"Message Recived\", message);\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson) {\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n\n                if (apiRequestCallId != null) {\n                  if (apiRequestCallId === _this2.getProductListingApiCallId) {\n                    _this2.setState({\n                      displayProducts: responseJson.data\n                    });\n\n                    _this2.handleSortingName();\n                  }\n\n                  if (apiRequestCallId === _this2.getBrandListingApiCallId) {\n                    brandData = [];\n                    responseJson.data.map(category => {\n                      brandData.push({\n                        label: category.attributes.name,\n                        value: category.attributes.id\n                      });\n                    });\n\n                    _this2.setState({\n                      brandData\n                    });\n                  }\n\n                  if (apiRequestCallId === _this2.getCategoryListingApiCallId) {\n                    categoryData = [];\n                    responseJson.data.map(category => {\n                      categoryData.push({\n                        label: category.attributes.name,\n                        value: category.attributes.id\n                      });\n                    });\n\n                    _this2.setState({\n                      categoryData\n                    });\n                  }\n\n                  if (apiRequestCallId === _this2.putActiveStatusOfProductApiCallId) {\n                    _this2.getProductListing();\n\n                    _this2.getBrandListing();\n\n                    _this2.getCategoryListing();\n                  } //create catalogue\n\n\n                  if (apiRequestCallId === _this2.catalogueCreateApiCallId) {\n                    console.log(responseJson, \"create api res\");\n                  }\n                }\n              } else {\n                errors = responseJson.errors;\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n\n                if (errors[0].token === 'Invalid token' || errors[0].token === 'Token has Expired') {\n                  // @ts-ignore\n                  localStorage.setItem(\"auth\", \"\"); //@ts-ignore\n\n                  (_this2$props = _this2.props) === null || _this2$props === void 0 ? void 0 : _this2$props.history.push(\"/login\");\n                } else if (errors[0].message) {\n                  _this2.openSnackBarHandler('error', errors[0].message);\n                }\n              }\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  } // Open View Details Modal\n  // Customizable Area Start\n  // Customizable Area End\n\n\n}","map":{"version":3,"sources":["/home/lp-greenapex/gargi/okydpim-36944-react-native/src/packages/blocks/catalogue/src/CatalogueController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","RichTextEditor","orderBy","Yup","configJSON","require","CatalogueController","constructor","props","getProductApiCallId","getProductListingApiCallId","getBrandListingApiCallId","getCategoryListingApiCallId","putActiveStatusOfProductApiCallId","catalogueCreateApiCallId","openSnackBarHandler","type","message","setState","snackBar","show","closeSnackBarHandler","state","getProductListing","headers","productApiContentType","token","window","localStorage","getItem","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","productListApiEndPoint","RestAPIRequestHeaderMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeGet","sendMessage","id","getBrandListing","brandListApiEndPoint","getCategoryListing","categoryListApiEndPoint","handleActiveStatusOfProduct","value","header","httpBody","active","endPointApi","putActiveStatusEndPointAPi","RestAPIRequestBodyMessage","apiMethodTypePut","createCategory","values","apiContentType","console","log","formData","FormData","append","productName","description","category","sku","brand","catalogueCreateEndPointApi","apiMethodTypePost","getToken","msg","SessionRequestMessage","send","handleCheckBox","index","arr","Object","assign","displayProducts","checkboxStatus","handleToggle","activeStatus","onMenuToggle","menuCollapsed","handleToggleAddProductModal","addNewProductModal","handleToggleAddVariationModal","addNewVariationModal","handleImageUpload","event","file","target","files","reader","FileReader","url","readAsDataURL","onloadend","e","selectedFile","result","handleOnDrop","acceptedFiles","concat","handleSortingName","sortName","setTimeout","sortedData","item","attributes","name","toLowerCase","handleSortingPricing","sortPricing","price","receive","bind","subScribedMessages","RestAPIResponceMessage","SessionSaveMessage","SessionResponseMessage","AddProductsSchema","string","required","errorProductName","errorSku","errorBrand","errorCategory","status","errorStatus","NewVariationTypeSchema","variationName","errorVariationName","variationCode","errorVariationCode","friends","array","of","min","allCheckboxStatus","arrayHolder","userType","subscriber","editor","createEmptyValue","brandData","categoryData","attachBuildingBlock","componentDidMount","from","responseJson","getData","RestAPIResponceSuccessMessage","apiRequestCallId","RestAPIResponceDataMessage","data","map","push","label","errors","errorReponse","RestAPIResponceErrorMessage","parseApiCatchErrorResponse","setItem","history"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n  getName,\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport RichTextEditor from \"react-rte\";\nimport { orderBy } from \"lodash\"\nimport * as Yup from \"yup\";\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n  navigation: any;\n  id: string;\n  // Customizable Area Start\n  // Customizable Area End\n}\n\ninterface S {\n  // Customizable Area Start\n  arrayHolder: any;\n  menuCollapsed: boolean;\n  userType: string;\n  token: string;\n  displayProducts: any;\n  allCheckboxStatus: any;\n  addNewProductModal: any;\n  addNewVariationModal: any;\n  acceptedFiles: any;\n  selectedFile: any;\n  snackBar: {\n    show: boolean;\n    message?: string;\n    type?: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\n  };\n  editor: any;\n  brandData: object[];\n  categoryData: object[],\n  sortPricing: any,\n  sortName: any,\n  AddProductsSchema: any,\n  NewVariationTypeSchema: any,\n  productName: string,\n  sku: string,\n  brand: string,\n  category: string,\n  status: string\n  variationName: string,\n  variationCode: string,\n  friends: any\n  // Customizable Area End\n}\n\ninterface SS {\n  id: any;\n}\ninterface BrandDataType {\n  label: number,\n  value: string\n}\n\ninterface CategoryDataType {\n  label: number,\n  value: string\n}\n\nexport default class CatalogueController extends BlockComponent<Props, S, SS> {\n  getProductApiCallId: any;\n  getProductListingApiCallId: any;\n  getBrandListingApiCallId: any;\n  getCategoryListingApiCallId: any;\n  putActiveStatusOfProductApiCallId: any;\n  catalogueCreateApiCallId: any\n\n  constructor(props: Props) {\n    super(props);\n    this.receive = this.receive.bind(this);\n\n    // Customizable Area Start\n    this.subScribedMessages = [\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.SessionSaveMessage),\n      getName(MessageEnum.SessionResponseMessage),\n    ];\n\n    let AddProductsSchema = {\n      productName: Yup.string().required(configJSON.errorProductName),\n      sku: Yup.string().required(configJSON.errorSku),\n      brand: Yup.string().required(configJSON.errorBrand),\n      category: Yup.string().required(configJSON.errorCategory),\n      status: Yup.string().required(configJSON.errorStatus)\n\n    }\n\n    let NewVariationTypeSchema = {\n      variationName: Yup.string().required(configJSON.errorVariationName),\n      variationCode: Yup.string().required(configJSON.errorVariationCode),\n      friends: Yup.array()\n        .of(\n          Yup.string().min(4, 'too short').required('Required'),\n        )\n        .required('Must have variant') // these constraints are shown if and only if inner constraints are satisfied\n        .min(1, 'Minimum of 1 variant required'),\n\n    }\n\n    this.state = {\n      allCheckboxStatus: true,\n      arrayHolder: [],\n      menuCollapsed: false,\n      acceptedFiles: [],\n      userType: configJSON.subscriber,\n      token: \"\",\n      addNewVariationModal: false,\n      snackBar: {\n        show: false,\n      },\n      addNewProductModal: false,\n      selectedFile: null,\n      editor: RichTextEditor.createEmptyValue(),\n      displayProducts: \"\",\n      brandData: [],\n      categoryData: [],\n      sortPricing: null,\n      sortName: null,\n      AddProductsSchema: AddProductsSchema,\n      NewVariationTypeSchema: NewVariationTypeSchema,\n      productName: \"\",\n      sku: \"\",\n      brand: \"\",\n      category: \"\",\n      status: \"\",\n      variationCode: \"\",\n      variationName: \"\",\n      friends: []\n\n    };\n    // Customizable Area End\n    runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n  }\n  //   async componentDidMount() {\n  //     super.componentDidMount();\n  //     this.getToken();\n  //     if (this.isPlatformWeb() === false) {\n  //       this.props.navigation.addListener(\"willFocus\", () => {\n  //         this.getToken();\n  //       });\n  //     }\n  //   }\n\n  // Customizable Area Start\n\n  async componentDidMount() {\n    this.getProductListing();\n    this.getBrandListing()\n    this.getCategoryListing()\n  }\n\n  async receive(from: string, message: Message) {\n    // Customizable Area Start\n    // runEngine.debugLog(\"Message Recived\", message);\n\n    if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n\n      if (responseJson) {\n        const apiRequestCallId = message.getData(\n          getName(MessageEnum.RestAPIResponceDataMessage)\n        );\n\n        if (apiRequestCallId != null) {\n          if (apiRequestCallId === this.getProductListingApiCallId) {\n            this.setState({\n              displayProducts: responseJson.data\n            })\n            this.handleSortingName()\n          }\n          if (apiRequestCallId === this.getBrandListingApiCallId) {\n            const brandData: BrandDataType[] = [];\n            responseJson.data.map((category: any) => {\n              brandData.push({\n                label: category.attributes.name,\n                value: category.attributes.id,\n              })\n            })\n            this.setState({ brandData });\n\n          }\n\n          if (apiRequestCallId === this.getCategoryListingApiCallId) {\n            const categoryData: CategoryDataType[] = [];\n            responseJson.data.map((category: any) => {\n              categoryData.push({\n                label: category.attributes.name,\n                value: category.attributes.id,\n              })\n            })\n            this.setState({ categoryData });\n\n          }\n          if (apiRequestCallId === this.putActiveStatusOfProductApiCallId) {\n            this.getProductListing();\n            this.getBrandListing();\n            this.getCategoryListing();\n          }\n\n          //create catalogue\n          if (apiRequestCallId === this.catalogueCreateApiCallId) {\n            console.log(responseJson, \"create api res\")\n          }\n\n        }\n      }\n      else {\n        const errors = responseJson.errors;\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n\n        if (errors[0].token === 'Invalid token' || errors[0].token === 'Token has Expired') {\n          // @ts-ignore\n          localStorage.setItem(\"auth\", \"\");\n          //@ts-ignore\n          this.props?.history.push(\"/login\");\n        } else if (errors[0].message) {\n          this.openSnackBarHandler('error', errors[0].message);\n        }\n      }\n    }\n  }\n\n  // Open View Details Modal\n  openSnackBarHandler = (type: \"success\" | \"info\" | \"warning\" | \"error\" | undefined, message: string): void => {\n    this.setState({\n      snackBar: {\n        show: true,\n        message: message,\n        type\n      }\n    });\n  };\n\n  // Close View Details Modal\n  closeSnackBarHandler = () => {\n    this.setState({\n      snackBar: {\n        show: false,\n        message: this.state.snackBar.message,\n        type: this.state.snackBar.type\n      }\n    });\n  };\n\n\n  // Handler Product Listing\n  getProductListing = (): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.getProductListingApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.productListApiEndPoint\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n  ///getBrands api\n\n  getBrandListing = (): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.getBrandListingApiCallId = requestMessage.messageId;\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.brandListApiEndPoint\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n  ///get category api\n\n  getCategoryListing = (): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.getCategoryListingApiCallId = requestMessage.messageId;\n\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.categoryListApiEndPoint\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n  //// handle active status\n  handleActiveStatusOfProduct = (value: any, id: any): boolean => {\n\n    const header = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n    };\n\n    // const attrs = values;\n\n    // const data = {\n    //   type: this.state.email,\n    //   attributes: attrs,\n    // };\n    const httpBody = {\n      active: value,\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n    const endPointApi = configJSON.putActiveStatusEndPointAPi + id\n\n    this.putActiveStatusOfProductApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      endPointApi\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypePut\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n\n  // Create Category Handler\n  createCategory = (values: any): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.apiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n\n    };\n    console.log(values, \"value\")\n    var formData = new FormData();\n\n\n    formData.append('name', values.productName)\n    formData.append('description', values.description)\n    formData.append('category', values.category)\n    formData.append('sku', values.sku)\n    formData.append('active', values.active)\n    formData.append('brand', values.brand)\n\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.catalogueCreateApiCallId = requestMessage.messageId;\n\n    requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.catalogueCreateEndPointApi);\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(formData));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypePost);\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n\n\n  getToken = () => {\n    const msg: Message = new Message(\n      getName(MessageEnum.SessionRequestMessage)\n    );\n    this.send(msg);\n  };\n\n  handleCheckBox = (index: any, value: any) => {\n    let arr = Object.assign([], this.state.displayProducts, {\n      [index]: {\n        ...this.state.displayProducts[index],\n        checkboxStatus: value,\n      },\n    });\n\n    // let link;\n    // this.state.displayProducts.includes();\n    this.setState({\n      ...this.state,\n      displayProducts: arr,\n    });\n\n  };\n\n  handleToggle = (index: any, value: any) => {\n    let arr = Object.assign([], this.state.displayProducts, {\n      [index]: {\n        ...this.state.displayProducts[index],\n        activeStatus: value,\n      },\n    });\n\n    this.setState({\n      ...this.state,\n      displayProducts: arr,\n    });\n\n    this.handleActiveStatusOfProduct(value, this.state.displayProducts[index].id)\n  };\n\n  onMenuToggle = () => {\n    this.setState({\n      menuCollapsed: !this.state.menuCollapsed,\n      // {this.handleToggle(index,e.)}\n    });\n  };\n\n  handleToggleAddProductModal = () => {\n    this.setState({\n      ...this.state,\n      addNewProductModal: !this.state.addNewProductModal,\n    });\n  };\n\n  handleToggleAddVariationModal = () => {\n    this.setState({\n      ...this.state,\n      addNewVariationModal: !this.state.addNewVariationModal,\n    });\n  };\n\n  handleImageUpload = (event: any) => {\n    var file = event.target.files[0];\n    const reader = new FileReader();\n    var url = reader.readAsDataURL(file);\n\n    reader.onloadend = (e: any) => {\n      this.setState({\n        selectedFile: [reader.result],\n      });\n    };\n\n    this.setState({\n      selectedFile: event.target.files[0],\n    });\n  };\n\n  handleOnDrop = (file: any) => {\n    this.setState({\n      acceptedFiles: this.state.acceptedFiles.concat(file),\n    });\n  };\n\n\n  // handle sorting of roleData\n  handleSortingName = () => {\n\n    this.setState({\n      sortName: this.state.sortName !== 'asc' ? 'asc' : 'desc'\n    })\n\n\n    setTimeout(() => {\n      const sortedData = orderBy(this.state.displayProducts, (item: any) => item.attributes.name.toLowerCase(), this.state.sortName);\n      this.setState({\n        displayProducts: sortedData\n      })\n\n    }, 500);\n  }\n\n\n\n  // handle sorting of Data\n  handleSortingPricing = () => {\n\n    this.setState({\n      sortPricing: this.state.sortPricing !== 'asc' ? 'asc' : 'desc'\n    })\n\n\n    setTimeout(() => {\n      const sortedData = orderBy(this.state.displayProducts, (item: any) => item.attributes.price, this.state.sortPricing);\n      this.setState({\n        displayProducts: sortedData\n      })\n\n    }, 500);\n\n  }\n  // Customizable Area Start\n  // Customizable Area End\n}\n"]},"metadata":{},"sourceType":"module"}