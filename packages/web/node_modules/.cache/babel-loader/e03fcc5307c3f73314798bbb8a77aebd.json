{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _regeneratorRuntime = require(\"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _idbKeyval = require(\"idb-keyval\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass WebStorage {\n  constructor(storageType = 'idb') {\n    _defineProperty(this, \"storage\", void 0);\n\n    if (storageType === 'idb') {\n      this.storage = {\n        name: storageType,\n        getItem: _idbKeyval.get,\n        setItem: _idbKeyval.set,\n        deleteItem: _idbKeyval.del,\n        keys: _idbKeyval.keys,\n        clear: _idbKeyval.clear\n      };\n    } else {\n      const webStorage = storageType === 'local' ? window.localStorage : window.sessionStorage;\n      this.storage = {\n        name: storageType,\n        getItem: webStorage.getItem.bind(webStorage),\n        setItem: webStorage.setItem.bind(webStorage),\n        deleteItem: webStorage.removeItem.bind(webStorage),\n        keys: () => Object.keys(webStorage),\n        clear: webStorage.clear.bind(webStorage)\n      };\n    }\n  }\n\n  getSingle(key) {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", _this.storage.getItem(key));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  setSingle(key, value) {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", _this2.storage.setItem(key, value));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n\n  getMany(keys) {\n    var _this3 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!(_this3.storage.name === 'idb')) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", Promise.all(keys.map(key => _this3.storage.getItem(key))).then(readValues => readValues.reduce((values, currentValue, currentIndex) => {\n              const key = keys[currentIndex];\n              return _objectSpread({}, values, {\n                [key]: currentValue\n              });\n            }, {})));\n\n          case 2:\n            return _context3.abrupt(\"return\", keys.reduce((storageValues, key) => {\n              return _objectSpread({}, storageValues, {\n                [key]: _this3.storage.getItem(key)\n              });\n            }, {}));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }))();\n  }\n\n  setMany(values) {\n    var _this4 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var _iterator, _step, keyValue, key;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _iterator = _createForOfIteratorHelper(values);\n            _context4.prev = 1;\n\n            _iterator.s();\n\n          case 3:\n            if ((_step = _iterator.n()).done) {\n              _context4.next = 12;\n              break;\n            }\n\n            keyValue = _step.value;\n            key = Object.getOwnPropertyNames(keyValue)[0];\n\n            if (key) {\n              _context4.next = 8;\n              break;\n            }\n\n            return _context4.abrupt(\"continue\", 10);\n\n          case 8:\n            _context4.next = 10;\n            return _this4.storage.setItem(key, keyValue[key]);\n\n          case 10:\n            _context4.next = 3;\n            break;\n\n          case 12:\n            _context4.next = 17;\n            break;\n\n          case 14:\n            _context4.prev = 14;\n            _context4.t0 = _context4[\"catch\"](1);\n\n            _iterator.e(_context4.t0);\n\n          case 17:\n            _context4.prev = 17;\n\n            _iterator.f();\n\n            return _context4.finish(17);\n\n          case 20:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[1, 14, 17, 20]]);\n    }))();\n  }\n\n  removeSingle(key) {\n    var _this5 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", _this5.storage.deleteItem(key));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }))();\n  }\n\n  removeMany(keys) {\n    var _this6 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var _iterator2, _step2, key;\n\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            if (!(_this6.storage.name === 'idb')) {\n              _context6.next = 20;\n              break;\n            }\n\n            _iterator2 = _createForOfIteratorHelper(keys);\n            _context6.prev = 2;\n\n            _iterator2.s();\n\n          case 4:\n            if ((_step2 = _iterator2.n()).done) {\n              _context6.next = 10;\n              break;\n            }\n\n            key = _step2.value;\n            _context6.next = 8;\n            return _this6.storage.deleteItem(key);\n\n          case 8:\n            _context6.next = 4;\n            break;\n\n          case 10:\n            _context6.next = 15;\n            break;\n\n          case 12:\n            _context6.prev = 12;\n            _context6.t0 = _context6[\"catch\"](2);\n\n            _iterator2.e(_context6.t0);\n\n          case 15:\n            _context6.prev = 15;\n\n            _iterator2.f();\n\n            return _context6.finish(15);\n\n          case 18:\n            _context6.next = 22;\n            break;\n\n          case 20:\n            _context6.next = 22;\n            return Promise.all(keys.map(k => _this6.storage.deleteItem(k)));\n\n          case 22:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, null, [[2, 12, 15, 18]]);\n    }))();\n  }\n\n  getKeys() {\n    var _this7 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", _this7.storage.keys());\n\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7);\n    }))();\n  }\n\n  dropStorage() {\n    var _this8 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            return _context8.abrupt(\"return\", _this8.storage.clear());\n\n          case 1:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8);\n    }))();\n  }\n\n}\n\nvar _default = WebStorage;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}