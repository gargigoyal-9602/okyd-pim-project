{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/gargi/okydpim-36944-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport RichTextEditor from \"react-rte\"; // Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\nexport default class CatalogueController extends BlockComponent {\n  constructor(props) {\n    super(props);\n    this.getProductApiCallId = void 0;\n    this.getProductListingApiCallId = void 0;\n\n    this.openSnackBarHandler = (type, message) => {\n      this.setState({\n        snackBar: {\n          show: true,\n          message: message,\n          type\n        }\n      });\n    };\n\n    this.getProductListing = () => {\n      const headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: window.localStorage.getItem(\"auth\")\n      };\n      const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      this.getProductListingApiCallId = requestMessage.messageId;\n      console.log(\"this.getProductListingApiCallId\", this.getProductListingApiCallId);\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.listApiEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    this.getToken = () => {\n      const msg = new Message(getName(MessageEnum.SessionRequestMessage));\n      this.send(msg);\n    };\n\n    this.handleCheckBox = (index, value) => {\n      // console.log(index, value);\n      let arr = Object.assign([], this.state.displayProducts, {\n        [index]: _objectSpread(_objectSpread({}, this.state.displayProducts[index]), {}, {\n          checkboxStatus: value\n        })\n      }); // let link;\n      // this.state.displayProducts.includes();\n      // console.log(\"link\", link);\n\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        displayProducts: arr\n      }));\n    };\n\n    this.handleToggle = (index, value) => {\n      let arr = Object.assign([], this.state.displayProducts, {\n        [index]: _objectSpread(_objectSpread({}, this.state.displayProducts[index]), {}, {\n          activeStatus: value\n        })\n      });\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        displayProducts: arr\n      }));\n    };\n\n    this.onMenuToggle = () => {\n      this.setState({\n        menuCollapsed: !this.state.menuCollapsed\n      });\n    };\n\n    this.handleToggleAddProductModal = () => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        addNewProductModal: !this.state.addNewProductModal\n      }));\n    };\n\n    this.handleToggleAddVariationModal = () => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        addNewVariationModal: !this.state.addNewVariationModal\n      }));\n    };\n\n    this.handleImageUpload = event => {\n      var file = event.target.files[0];\n      const reader = new FileReader();\n      var url = reader.readAsDataURL(file);\n\n      reader.onloadend = e => {\n        this.setState({\n          selectedFile: [reader.result]\n        });\n      };\n\n      console.log(url);\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.handleOnDrop = file => {\n      this.setState({\n        acceptedFiles: this.state.acceptedFiles.concat(file)\n      });\n    };\n\n    this.receive = this.receive.bind(this); // Customizable Area Start\n\n    this.subScribedMessages = [getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.SessionSaveMessage), getName(MessageEnum.SessionResponseMessage)];\n    this.state = {\n      allCheckboxStatus: true,\n      arrayHolder: [],\n      menuCollapsed: false,\n      acceptedFiles: [],\n      userType: configJSON.subscriber,\n      token: \"\",\n      addNewVariationModal: false,\n      snackBar: {\n        show: false\n      },\n      addNewProductModal: false,\n      selectedFile: null,\n      editor: RichTextEditor.createEmptyValue(),\n      displayProducts: \"\"\n    }; // Customizable Area End\n\n    runEngine.attachBuildingBlock(this, this.subScribedMessages);\n  } //   async componentDidMount() {\n  //     super.componentDidMount();\n  //     this.getToken();\n  //     if (this.isPlatformWeb() === false) {\n  //       this.props.navigation.addListener(\"willFocus\", () => {\n  //         this.getToken();\n  //       });\n  //     }\n  //   }\n  // Customizable Area Start\n\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.getProductListing();\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  receive(from, message) {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var responseJson, apiRequestCallId, errors, errorReponse, _this2$props;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            // Customizable Area Start\n            // runEngine.debugLog(\"Message Recived\", message);\n            if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n              responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n\n              if (responseJson) {\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n\n                if (apiRequestCallId != null) {\n                  if (apiRequestCallId === _this2.getProductListingApiCallId) {\n                    //console.log(\"here is your listing response\", responseJson.data);\n                    _this2.setState({\n                      displayProducts: responseJson.data\n                    });\n                  }\n                }\n              } else {\n                errors = responseJson.errors;\n                errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                _this2.parseApiCatchErrorResponse(errorReponse);\n\n                if (errors[0].token === 'Invalid token' || 'Token has Expired') {\n                  // @ts-ignore\n                  localStorage.setItem(\"auth\", \"\"); //@ts-ignore\n\n                  (_this2$props = _this2.props) === null || _this2$props === void 0 ? void 0 : _this2$props.history.push(\"/login\");\n                } else if (errors[0].message) {\n                  _this2.openSnackBarHandler('error', errors[0].message);\n                }\n              }\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  } // Open View Details Modal\n  // Customizable Area Start\n  // Customizable Area End\n\n\n}","map":{"version":3,"sources":["/home/lp-greenapex/gargi/okydpim-36944-react-native/src/packages/blocks/catalogue/src/CatalogueController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","RichTextEditor","configJSON","require","CatalogueController","constructor","props","getProductApiCallId","getProductListingApiCallId","openSnackBarHandler","type","message","setState","snackBar","show","getProductListing","headers","productApiContentType","token","window","localStorage","getItem","requestMessage","RestAPIRequestMessage","messageId","console","log","addData","RestAPIResponceEndPointMessage","listApiEndPoint","RestAPIRequestHeaderMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeGet","sendMessage","id","getToken","msg","SessionRequestMessage","send","handleCheckBox","index","value","arr","Object","assign","state","displayProducts","checkboxStatus","handleToggle","activeStatus","onMenuToggle","menuCollapsed","handleToggleAddProductModal","addNewProductModal","handleToggleAddVariationModal","addNewVariationModal","handleImageUpload","event","file","target","files","reader","FileReader","url","readAsDataURL","onloadend","e","selectedFile","result","handleOnDrop","acceptedFiles","concat","receive","bind","subScribedMessages","RestAPIResponceMessage","SessionSaveMessage","SessionResponseMessage","allCheckboxStatus","arrayHolder","userType","subscriber","editor","createEmptyValue","attachBuildingBlock","componentDidMount","from","responseJson","getData","RestAPIResponceSuccessMessage","apiRequestCallId","RestAPIResponceDataMessage","data","errors","errorReponse","RestAPIResponceErrorMessage","parseApiCatchErrorResponse","setItem","history","push"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n  getName,\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport RichTextEditor from \"react-rte\";\n\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n  navigation: any;\n  id: string;\n  // Customizable Area Start\n  // Customizable Area End\n}\n\ninterface S {\n  // Customizable Area Start\n  arrayHolder: any;\n  menuCollapsed: boolean;\n  userType: string;\n  token: string;\n  displayProducts: any;\n  allCheckboxStatus: any;\n  addNewProductModal: any;\n  addNewVariationModal: any;\n  acceptedFiles: any;\n  selectedFile: any;\n  snackBar: {\n    show: boolean;\n    message?: string;\n    type?: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\n  };\n  editor: any;\n  // Customizable Area End\n}\n\ninterface SS {\n  id: any;\n}\n\nexport default class CatalogueController extends BlockComponent<Props, S, SS> {\n  getProductApiCallId: any;\n  getProductListingApiCallId: any;\n  constructor(props: Props) {\n    super(props);\n    this.receive = this.receive.bind(this);\n\n    // Customizable Area Start\n    this.subScribedMessages = [\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.SessionSaveMessage),\n      getName(MessageEnum.SessionResponseMessage),\n    ];\n\n    this.state = {\n      allCheckboxStatus: true,\n      arrayHolder: [],\n      menuCollapsed: false,\n      acceptedFiles: [],\n      userType: configJSON.subscriber,\n      token: \"\",\n      addNewVariationModal: false,\n      snackBar: {\n        show: false,\n      },\n      addNewProductModal: false,\n      selectedFile: null,\n      editor: RichTextEditor.createEmptyValue(),\n      displayProducts :\"\"\n    };\n    // Customizable Area End\n    runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n  }\n  //   async componentDidMount() {\n  //     super.componentDidMount();\n  //     this.getToken();\n  //     if (this.isPlatformWeb() === false) {\n  //       this.props.navigation.addListener(\"willFocus\", () => {\n  //         this.getToken();\n  //       });\n  //     }\n  //   }\n\n  // Customizable Area Start\n\n  async componentDidMount() {\n    this.getProductListing();\n  }\n\n  async receive(from: string, message: Message) {\n    // Customizable Area Start\n    // runEngine.debugLog(\"Message Recived\", message);\n\n    if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n\n      if (responseJson) {\n        const apiRequestCallId = message.getData(\n          getName(MessageEnum.RestAPIResponceDataMessage)\n        );\n\n        if (apiRequestCallId != null) {\n          if (apiRequestCallId === this.getProductListingApiCallId) {\n            //console.log(\"here is your listing response\", responseJson.data);\n            this.setState({\n              displayProducts : responseJson.data\n            })\n          }\n        }\n      } else {\n        const errors = responseJson.errors;\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n        this.parseApiCatchErrorResponse(errorReponse);\n\n         if(errors[0].token === 'Invalid token' || 'Token has Expired') {\n           // @ts-ignore\n          localStorage.setItem(\"auth\", \"\");\n          //@ts-ignore\n          this.props?.history.push(\"/login\");\n        } else if(errors[0].message) {\n          this.openSnackBarHandler('error', errors[0].message);\n        } \n      }\n    }\n  }\n\n  // Open View Details Modal\n  openSnackBarHandler = (\n    type: \"success\" | \"info\" | \"warning\" | \"error\" | undefined,\n    message: string\n  ): void => {\n    this.setState({\n      snackBar: {\n        show: true,\n        message: message,\n        type,\n      },\n    });\n  };\n\n  // Handler Product Listing\n  getProductListing = (): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: window.localStorage.getItem(\"auth\"),\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.getProductListingApiCallId = requestMessage.messageId;\n    console.log(\n      \"this.getProductListingApiCallId\",\n      this.getProductListingApiCallId\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.listApiEndPoint\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n  getToken = () => {\n    const msg: Message = new Message(\n      getName(MessageEnum.SessionRequestMessage)\n    );\n    this.send(msg);\n  };\n\n  handleCheckBox = (index: any, value: any) => {\n    // console.log(index, value);\n    let arr = Object.assign([], this.state.displayProducts, {\n      [index]: {\n        ...this.state.displayProducts[index],\n        checkboxStatus: value,\n      },\n    });\n\n    // let link;\n    // this.state.displayProducts.includes();\n    // console.log(\"link\", link);\n    this.setState({\n      ...this.state,\n      displayProducts: arr,\n    });\n  };\n\n  handleToggle = (index: any, value: any) => {\n    let arr = Object.assign([], this.state.displayProducts, {\n      [index]: {\n        ...this.state.displayProducts[index],\n        activeStatus: value,\n      },\n    });\n\n    this.setState({\n      ...this.state,\n      displayProducts: arr,\n    });\n  };\n\n  onMenuToggle = () => {\n    this.setState({\n      menuCollapsed: !this.state.menuCollapsed,\n    });\n  };\n\n  handleToggleAddProductModal = () => {\n    this.setState({\n      ...this.state,\n      addNewProductModal: !this.state.addNewProductModal,\n    });\n  };\n\n  handleToggleAddVariationModal = () => {\n    this.setState({\n      ...this.state,\n      addNewVariationModal: !this.state.addNewVariationModal,\n    });\n  };\n\n  handleImageUpload = (event: any) => {\n    var file = event.target.files[0];\n    const reader = new FileReader();\n    var url = reader.readAsDataURL(file);\n\n    reader.onloadend = (e: any) => {\n      this.setState({\n        selectedFile: [reader.result],\n      });\n    };\n    console.log(url);\n\n    this.setState({\n      selectedFile: event.target.files[0],\n    });\n  };\n\n  handleOnDrop = (file: any) => {\n    this.setState({\n      acceptedFiles: this.state.acceptedFiles.concat(file),\n    });\n  };\n  // Customizable Area Start\n  // Customizable Area End\n}\n"]},"metadata":{},"sourceType":"module"}